<!DOCTYPE html>
<html lang="zh-hant">
{% load  static %}

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Modern Navbar with Header</title>
  <!-- Bootstrap -->
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous"> -->
  <!-- Font Awesome -->
  <!-- <link
  rel="stylesheet"
  href="https://use.fontawesome.com/releases/v5.11.2/css/all.css"/> -->

  <!-- Style.css -->
  <link rel="stylesheet" href="../static/style.css">
  <!-- Favicon icon -->
  <!-- <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon"> -->
  <!-- fontawesome icon -->
  <link rel="stylesheet" href="../static/assets/fonts/fontawesome/css/fontawesome-all.min.css">
  <!-- animation css -->
  <link rel="stylesheet" href="../static/assets/plugins/animation/css/animate.min.css">
  <!-- vendor css -->
  <link rel="stylesheet" href="../static/assets/css/style.css">
  <!-- <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/> -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <!-- <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"
    integrity="sha512-T/tUfKSV1bihCnd+MxKD0Hm1uBBroVYBOYSk1knyvQ9VyZJpc/ALb4P0r6ubwVPSGB2GvjeoMAJJImBG12TiaQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css"
    integrity="sha512-mSYUmp1HYZDFaVKK//63EcZq4iFWFjxSL+Z3T/aCt4IO9Cejm03q3NKKYN6pFQzY0SBOr8h+eCIAZHPXcpZaNw=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ui-timepicker-addon/1.6.3/jquery-ui-timepicker-addon.min.js"></script> -->
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous"> -->
  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script> -->

  <style>
    .hide {
      display: none;
    }

    /* input::-webkit-datetime-edit-month-field,
    ::-webkit-datetime-edit-day-field,
    ::-webkit-datetime-edit-text {
      display:none;} */
    .datepicker-dropdown {
      /* padding: 20px; */
      color: #000000;
      background: #ffffff;
      font-size: 14px;
    }

    .ui-datepicker-calendar {
      display: none;
    }
    option{
margin: 5px;
/* text-align: center; */
}
  </style>
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-mainbg">
    <!-- Logo -->
    <a class="navbar-brand navbar-logo" href="./index.html">股票查詢系統</a>
    <!-- Collapse Button -->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <i class="fas fa-bars text-white"></i>
    </button>
    <!-- Links -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto">
        <!-- For Styling -->
        <div class="hori-selector">
          <div class="left"></div>
          <div class="right"></div>
        </div>
        <!-- Nav Links -->
        <li class="nav-item active">
          <a class="nav-link" href="#Documents">
            <i class="far fa-copy">
            </i>主頁
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#Charts">
            <i class="far fa-chart-bar">
            </i>預測
          </a>
        </li>

      </ul>
    </div>
  </nav>


  <div class="app">

    <div class="row" style="margin-top: 1rem;margin-right: auto;margin-left: auto;">
      <div class="col-lg-6 offset-lg-3 col-sm-8 offset-sm-2 col-12">
        <h3 class="text-center " style="font-size: 35px;">請輸入股票代號或股票名稱</h3>
        <form method="post">
          {%csrf_token%}
          <div class="input-group  input-group-lg" id="adv-search">
            <input type="text" name="stock_name" class="form-control form-control-search " placeholder="台積電 or 2330"
              value="" required>
            <div class="input-group-append">

              <!-- <div class="dropdown dropdown-lg">
                <button type="button" class="btn  btn-secondary dropdown-toggle dropdown-toggle-split"
                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                </button>
                <div class="dropdown-menu dropdown-menu-right" role="menu">
                  <div class="form-group">
                    <label for="date">日期</label>
                    
                    <input type="month" class="form-control" id="date" name="date">
                  </div>
                </div>
              </div> -->

              <button type="submit" class="btn btn-primary"><span class="fa fa-search"
                  aria-hidden="true"></span></button>
            </div>
          </div>
        </form>
      </div>

      <div class="col-12 col-lg-6 align-items-center" style="margin-top: 1rem;">

        <div class="card card-event">
          <div class="card-header">
            <h5><b>相關資訊</b></h5>
          </div>

          <div class="card-block">
            <h3 class="" style=""><b>查詢時間：</b>{{ real_search_time }}</h3>
            <h3 class=""><b>股票代號：</b>{{ code }}</h3>
            <h3 class=""><b>股票名稱：</b>{{ name }}</h3>
            <h3 class=""><b>股票全名：</b>{{ fullname }}</h3>
            <i class="feather icon-alert-circle text-c-blue f-50" style="margin-top: 5 rem;"></i>
          </div>
        </div>
        <div class="card card-social">
          <div class="card-block  border-bottom">
            <div class="row align-items-center justify-content-center card-active">
              <div class="col-4">
                <h3 class="text-center m-b-20"><span class="m-r-5" style="font-size: 32px;"><b>開盤價</b></span></h4>
                  <div class="row d-flex align-items-center justify-content-center">
                    <div class="">
                      <h3 class="f-w-300 d-flex align-items-center m-b-0">
                        <i class="fa fa-bell text-c-yellow f-30 m-r-10"></i> NT$ {{ open }}</h3>
                    </div>
                  </div>
              </div>
              <div class="col-4">
                <h3 class="text-center m-b-20"><span class="m-r-5" style="font-size: 32px;"><b>最高價</b></span></h4>
                  <div class="row d-flex align-items-center justify-content-center">
                    <div class="">
                      <h3 class="f-w-300 d-flex align-items-center m-b-0">
                        <i class="feather icon-arrow-up text-c-green f-30 m-r-10"></i>NT$ {{ high }}</h3>
                    </div>

                  </div>

              </div>
              <div class="col-4">
                <h3 class="text-center m-b-20"><span class="m-r-5" style="font-size: 32px;"><b>最低價</b></span></h4>
                  <div class="row d-flex align-items-center justify-content-center">
                    <div class="">
                      <h3 class="f-w-300 d-flex align-items-center m-b-0">
                        <i class="feather icon-arrow-down text-c-red f-30 m-r-10"></i>NT$ {{ low }}</h3>
                    </div>

                  </div>

              </div>
            </div>

          </div>

          <div class="card-block border-bottom">
            <div class="row align-items-center justify-content-center card-active">
              <div class="col-6">
                <h3 class="text-center m-b-20"><span class="m-r-5" style="font-size: 32px;"><b>最佳買入</b></span></h4>
                  <div class="row align-items-center justify-content-center">
                    <div class="col-auto" style="margin-left: 1.5rem;">
                      <i class="fa fa-shopping-cart text-c-green f-36"></i>
                    </div>
                    <div class="col text-left" style="padding-left: 10px;">
                      <h4>價格：<span class="text-muted">
                          {% for i in best_bid_price%}
                          {%if forloop.last %}{{i}} {%else%} {{i}}, {%endif%}
                          {% endfor %}</span></h4>
                      <h4 class="text-c-black mb-0">數量：<span class="text-muted">
                          {% for i in best_bid_volume%}
                          {%if forloop.last %}{{i}} {%else%} {{i}}, {%endif%}
                          {% endfor %}
                        </span></h4>
                    </div>
                  </div>
              </div>
              <div class="col-6">
                <h3 class="text-center  m-b-20"><span class="m-r-5" style="font-size: 32px;"><b>最佳賣出</b></span></h4>

                  <div class="row align-items-center justify-content-center">
                    <div class="col-auto" style="margin-left: 1.5rem;">
                      <i class="fa fa-money-bill-alt text-c-red f-36"></i>
                    </div>
                    <div class="col text-left" style="padding-left: 10px;">
                      <h4>價格：<span class="text-muted">
                          {% for i in best_ask_price%}
                          {%if forloop.last %}{{i}} {%else%} {{i}}, {%endif%}
                          {% endfor %}
                        </span></h4>
                      <h4 class="text-c-black mb-0">數量：<span class="text-muted">
                          {% for i in best_ask_volume%}
                          {%if forloop.last %}{{i}} {%else%} {{i}}, {%endif%}
                          {% endfor %}
                        </span></h4>
                    </div>
                  </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-lg-6" style="margin-top: 1rem;">
        <div class="card">
          <div class="card-header">
            <h5><b>開盤走勢圖</b></h5>
          </div>
          <div class="card-block">
            <!-- <div class="form-row">
              <div class="col-md-6 mb-3">
                <label class="control-label" for="">請選擇年開盤或月開盤</label>
                <select class="form-control" name="" style="margin-bottom: 0.5rem;">
                  <option selected>Choose...</option>
                  <option value="year">年開盤</option>
                  <option value="month">月開盤</option>
                </select>
              </div>
              <div class="col-md-6 mb-3" id="cal"></div>
            </div> -->
            <form class="form-inline ">
              <!-- <label class="my-1 mr-2" for="">請選擇年開盤或月開盤</label> -->
              <div class="form-row">
                <div class="col-auto mb-3 mr-3" >
                  <label class="mb-1 mr-2" for="" style="display:block;">請選擇股票代號與名稱</label>
                  <!-- <select class="form-control mr-2" name="" style="margin-bottom: 0.5rem;width: 160px; " onfocus='this.size=;' onblur='this.size=1;' onchange='this.size=1; this.blur();'> -->
                  <select class="form-control mr-2" name="" style="margin-bottom: 0.5rem;width: 160px; ">
                    <option selected>Choose...</option>
                    <option value="6180" >6180(橘子)</option>
                    <option value="2317">2317(鴻海)</option>
                    <option value="3008">3008(大立光)</option>
                    <option value="2330">2330(台積電)</option>
                    <option value="2886">2886(兆豐金)</option>
                    <option value="2002">2002(中鋼)</option>
                    <option value="3260">3260(威剛)</option>
                    <option value="2603">2603(長榮)</option>
                    <option value="2377">2377(微星)</option>
                    <option value="2609">2609(陽明)</option>
                  </select>
                </div>
              </div>

              <div class="form-row">
                <div class="col-auto mb-3 mr-2" >
                  <label class="mb-1 mr-2" for="" style="display:block;">請選擇年或月開盤</label>
                  <select class="form-control  mr-2" name="" style="margin-bottom: 0.5rem;">
                    <option selected>Choose...</option>
                    <option value="year">年開盤</option>
                    <option value="month">月開盤</option>
                  </select>
                </div>
                
                <div class="col-auto" id="cal"></div>
              </div>


              <button type="submit" class="btn btn-primary my-1">Submit</button>
            </form>
        
              <!-- <label class="control-label" for="">test</label> 
              <input type="text" class="form-control ">  -->
              <!-- <input type="date" class="form-control" id="date" name="date"> -->
              <!-- <input class="date-own form-control" id='yy' style="width: 300px;" type="button"> -->
              <!-- <div class="input-group mb-3 " style="width: 300px;">
                <input type="text" class="form-control date-own"  id="years"  placeholder="----年"
                  aria-label="years" aria-describedby="basic">
                <div class="input-group-append">
                  <span class="input-group-text" id="basic">@.com</span>
                </div>
              </div> -->
            
            <div id="morris-bar-chart" style="height:300px"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // var yearContent = '<input class="form-control" id="years" style="width: 300px;" type="text">'
    var yearContent = '<label class="mb-1 mr-2" for="" style="display:block;">請選擇年分</label>\
                        <div class="input-group mr-sm-2" style="width: 125px;">\
                          <input type="text" class="form-control date-own"  id="years"  placeholder="----年"\
                            aria-label="years" aria-describedby="basic">\
                          <div class="input-group-append">\
                            <span class="input-group-text" id="basic" ><li class="fa fa-calendar" aria-hidden="true"></li></span>\
                          </div>\
                        </div>'
    // var monthContent = '<input class="form-control" id="months" style="width: 300px;" type="month">'
    var monthContent = '<label class="mb-1 mr-2" for="" style="display:block;">請選擇年分與月份</label>\
                        <div class="input-group mr-sm-2" style="width: 140px;">\
                          <input type="text" class="form-control date-own"  id="months"  placeholder="----年--月"\
                            aria-label="years" aria-describedby="basic">\
                          <div class="input-group-append">\
                            <span class="input-group-text" id="basic" ><li class="fa fa-calendar" aria-hidden="true"></li></span>\
                          </div>\
                        </div>'
    var $j = jQuery.noConflict();
    $j("select").on("change", function () {
      if ($('select').val() == 'year') {
        // $("#test").addClass("hide");
        // $("#cal").append(yearContent);
        $("#cal").html(yearContent);
        // $("#yy").addClass(" date-own");
        $j('#years').datepicker({
          startView: "years",
          minViewMode: 2,
          format: 'yyyy',
          endDate: '+0d',
          autoclose: true,
        });
      } else if ($('select').val() == 'month') {
        $("#cal").html(monthContent);
        $j('#months').datepicker({
          // minViewMode: 2,
          format: "yyyy-mm",
          viewMode: "months",
          minViewMode: "months",
          endDate: '+0d',
          autoclose: true,
          // startDate: "today",
          // language: 'zh-TW'//中文化

        });
        // $("#calendar").removeClass("hide");
        // $("#calendar").addClass("hide");
      }
    });

    // $j(document).click(function () {
    //   $j('#years').datepicker({
    //     minViewMode: 2,
    //     format: 'yyyy',

    //   });
    // });
    // $('.date-own').datepicker({
    //   minViewMode: 2,
    //   format: 'yyyy',
    // });
    // var $j = jQuery.noConflict();
    // $j("#cal").on("click","#yy", function(){
    //   console.log("on 点击一次");
    //   $j('.date-own').datepicker({
    //   minViewMode: 2,
    //   format: 'yyyy',

    // });
    // });
    // var $j = jQuery.noConflict();
    // // $j("#datepicker").datepicker();
    // $j(function() {
    //   $j('.date-own').datepicker();
    //     // $( "#anim" ).change(function() {
    //     //     $( "#datepicker" ).datepicker( "option", "showAnim", $( this ).val() );
    //     // });
    // });
    // $(function(){
    // $('.del').click(deleteTr);
    // $('.add').click(function() {
    // $("10368 刪除").find(".del").click(deleteTr).end().appendTo('tbody');
    // });
    // function deleteTr(){
    // $(this).parents("tr").remove();
    // }
    // });
    // $(document).ready(function () {
    //   $('.date-own').datepicker({
    //   minViewMode: 2,
    //   format: 'yyyy'
    // });
    // });
    //     $('#yearPicker').datetimepicker({
    //     format      :   "YYYY",
    //     viewMode    :   "years", 
    // });
  </script>


  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
  </script>

  <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script> -->
  <script src="../static/assets/js/vendor-all.min.js"></script>
  <script src="../static/assets/plugins/bootstrap/js/bootstrap.min.js"></script>
  <script src="../static/assets/js/pcoded.min.js"></script>
  <!-- Custom Script -->
  <script src="../static/script.js"></script>
</body>

</html>